<!DOCTYPE html>
<html>
<head>
	<title>Interactive Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
  <script src="leaflet-sidebar.js"></script>
  <script src="leaflet.curve.js"></script>
  <script src="https://kit.fontawesome.com/b68c726e4c.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" href="leaflet-sidebar.css" />
</head>

<body>

<div id="mapid" class="sidebar-map"></div>

<!-- Start Sidebar -->
<div id="sidebar" class="sidebar collapsed">
  <!-- Nav tabs -->
  <div class="sidebar-tabs">
      <ul role="tablist">
          <li><a href="#home" role="tab"><i class="fas fa-bars"></i></a></li>
          <li><a href="#routeplanner" role="tab"><i class="fas fa-route"></i></a></li>
          <li><a href="#settings" role="tab"><i class="fas fa-cog"></i></a></li>
      </ul>
  </div>

  <!-- Tab panes -->
  <div class="sidebar-content">
      <div class="sidebar-pane" id="home">
          <h1 class="sidebar-header">
              Vakantie Map
              <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
          </h1>

          <p class="intro">Gegroet kinders, welkom bij dit knapperig mappie die jou de weg gaat wijzen naar reis mogelijkheden! Als eerst snel even een beetje uitleg.</p>

          <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

          <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

          <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
      </div>

      <div class="sidebar-pane" id="routeplanner">
          <h1 class="sidebar-header">
            Route Planner
            <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
          </h1>

          <p>Add location</p>

          <input type="text" name="depature" placeholder="Input a location...">

          <input type="text" name="depature" placeholder="Input a location...">

          <button>Start</button>
      </div>

      <div class="sidebar-pane" id="settings">
          <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
      </div>
  </div>
</div>

<script>
// Basemap
var map = L.map('mapid').setView([20.619005,90.295141], 3);
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 19,
	layers:[transMO, transMA,transSK,transSJK, transSJT]
}).addTo(map);

// Remove content on map click
map.on('click', function () {
    myCustomControl.clearContent();
});

// Makers
var mSchiphol = L.marker([52.308039, 4.762198]).bindTooltip("<b>Schiphol<b>")
  mSchiphol.on('click', function () {
    myCustomControl.setContent('Schiphol Aiport');
  });

var mPulkovo = L.marker([59.80188714299779,30.271961232351707]).bindTooltip("<b>Pulkovo<b>")
  mPulkovo.on('click', function () {
    myCustomControl.setContent('Pulkovo Aiport');
  });
var mMoskovskiy = L.marker([59.92940773248788,30.36217002031681]).bindTooltip("<b>Moskovskiy Trainstation<b>")
	
var mLeningradsky = L.marker([55.7288731827477,37.640874416699035]).bindTooltip("<b>Leningradsky Trainstation<b>")

var mYaroslavsky = L.marker([55.7768024,37.6573515]).bindTooltip("<b>Yaroslavsky Trainstation<b>")

var mBeijing = L.marker([39.90208233734751,116.4215965127216]).bindTooltip("<b>Beijing Trainstation<b>")

var mVladivostok = L.marker([43.11161047086922,131.88140754402076]).bindTooltip("<b>Vladivostok Trainstation<b>")

var mVladivostokAP = L.marker([43.3908,132.151]).bindTooltip("<b>Vladivostok Knevichi Airport<b>")

var mDonghae = L.marker([37.49684265833768,129.13402439854494]).bindTooltip("<b>Donghae Port<b>")

var mSeoul = L.marker([37.5666791,126.9782914]).bindTooltip("<b>Seoul<b>")

var mSeoulAP = L.marker([37.5590275,126.7932985]).bindTooltip("<b>Seoul Airport<b>")

var mSakaiminato = L.marker([35.547064,133.252472]).bindTooltip("<b>Sakai-Minato Port<b>")

var mKyoto = L.marker([35.021041,135.7556075]).bindTooltip("<b>Kyoto<b>")

var mOsaka = L.marker([34.4342045,135.222523]).bindTooltip("<b>Osaka-KIX Airport<b>")

var mTokyoAP = L.marker([35.770666,140.387168]).bindTooltip("<b>Tokyo Narita Airport<b>")

var mTokyo = L.marker([35.674659,139.765781]).bindTooltip("<b>Tokyo<b>");

// Markerless points
var pChita = [52.033409,113.500893]; // Point where Manchurian line goes into china
var pTakhtamygda = [54.1088,123.609]; // Point between Chita and Khabarovsk
var pKhabarovsk = [48.4814,135.077]; // Point between Takhthamygda and Vladivostok
var pUlanUde = [51.84096188110149,107.58316250358831]; // Point where Trans Siberian and Trans Manchurian line split off from Trans Mongolian
var pUlaanbaatar = [47.90863506880966,106.8839715299694]; // Capital of Mongolia
var pHarbin = [45.75978595038456,126.62382161193685]; // Point between Chita and Beijing on the Trans Manchurian line

// Schiphol -> Pulkovo
var latlngs = [];

var latlng1 = [52.308039, 4.762198],
  latlng2 = [59.80188714299779,30.271961232351707];

var offsetX = latlng2[1] - latlng1[1],
  offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),
  theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14 / 10);

var r2 = (r / 2) / (Math.cos(thetaOffset)),
  theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
  midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
  color: 'blue',
  dashArray: "30 10",
  weight: 3
}

var LineSP = L.curve(
  [
    'M', latlng1,
    'Q', midpointLatLng,
    latlng2
  ], pathOptions);	

// St.Petersburg -> Moscow
var latlngs = [
    mMoskovskiy.getLatLng(),
    mLeningradsky.getLatLng()
];
var LineML = L.polyline(latlngs, {color: 'blue'});
LineML.on('click', function () {
    myCustomControl.setContent('LineML');
  });

// Moscow -> Ulan-Ude
var latlngs = [
    mYaroslavsky.getLatLng(),
    pUlanUde
];
var LineYU = L.polyline(latlngs, {color: 'blue'});

// Ulan-Ude -> Uulanbaatar -> Beijing
var pathOptions = {
  color: 'blue',
  weight: 3
}

var LineUB = L.curve(
  [
    'M', [51.84096188110149,107.58316250358831],
    'Q', [47.90863506880966,102.9],
	[39.90208233734751,116.4215965127216]
  ], pathOptions);


// Chita -> Harbin -> Beijing
var pathOptions = {
  color: 'blue',
  weight: 3
}

var LineCHB = L.curve(
  [
    'M', pChita,
    'Q', [45.75978595038456,138.2],
	[39.90208233734751,116.4215965127216]
  ], pathOptions);

// Beijing -> Schiphol
var latlngs = [];

var latlng1 = [39.90208233734751,116.4215965127216],
  latlng2 = [52.308039, 4.762198];

var offsetX = latlng2[1] - latlng1[1],
  offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),
  theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14 / 10);

var r2 = (r / 2) / (Math.cos(thetaOffset)),
  theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
  midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
  color: 'blue',
  dashArray: "30 10",
  weight: 3
}

var LineBS = L.curve(
  [
    'M', latlng1,
    'Q', midpointLatLng,
    latlng2
  ], pathOptions);

// Ulan-Ude -> Chita
var latlngs = [
	pUlanUde,
	pChita,
];
var LineUC = L.polyline(latlngs, {color: 'blue'});

// Chita -> Takhtamygda -> Khabarovsk
var pathOptions = {
  color: 'blue',
  weight: 3
}

var LineCTK = L.curve(
  [
    'M', pChita,
    'Q', [57,123.609],
	pKhabarovsk,
  ], pathOptions);

// Khabarovsk -> Vladivostok
var pathOptions = {
  color: 'blue',
  weight: 3
}

var LineKV = L.curve(
  [
    'M', pKhabarovsk,
    'Q', [46.005547,138],
	[43.11161047086922,131.88140754402076],
  ], pathOptions);

// Vladivostok -> Donghae
var latlngs = [
	mVladivostok.getLatLng(),
	mDonghae.getLatLng()
];
var LineVD = L.polyline(latlngs, {color: 'blue', dashArray: "30 10"});

// Donghae -> Seoul
var latlngs = [
	mDonghae.getLatLng(),
	mSeoul.getLatLng()
];
var LineDS = L.polyline(latlngs, {color: 'blue'});

// Seoul AP -> Schiphol
var latlngs = [];

var latlng1 = [37.5590275,126.7932985],
  latlng2 = [52.308039, 4.762198];

var offsetX = latlng2[1] - latlng1[1],
  offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),
  theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14 / 10);

var r2 = (r / 2) / (Math.cos(thetaOffset)),
  theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
  midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
  color: 'blue',
  dashArray: "30 10",
  weight: 3
}

var LineSS = L.curve(
  [
    'M', latlng1,
    'Q', midpointLatLng,
    latlng2
  ], pathOptions);
  
// Donghae -> Sakai-Minato
var latlngs = [
	mDonghae.getLatLng(),
	mSakaiminato.getLatLng()
];
var LineDSM = L.polyline(latlngs, {color: 'blue', dashArray: "30 10"});

// Sakai-Minato -> Kyoto
var latlngs = [
	mSakaiminato.getLatLng(),
	mKyoto.getLatLng()
];
var LineSMK = L.polyline(latlngs, {color: 'blue'});

// Osaka KIX -> Schiphol
var latlngs = [];

var latlng1 = [34.4342045,135.222523],
  latlng2 = [52.308039, 4.762198];

var offsetX = latlng2[1] - latlng1[1],
  offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),
  theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14 / 10);

var r2 = (r / 2) / (Math.cos(thetaOffset)),
  theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
  midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
  color: 'blue',
  dashArray: "30 10",
  weight: 3
}

var LineOS = L.curve(
  [
    'M', latlng1,
    'Q', midpointLatLng,
    latlng2
  ], pathOptions);

// Vladivostok Knevichi -> Tokyo Narita
var latlngs = [];

var latlng1 = [43.3908,132.151],
  latlng2 = [35.770666,140.387168];

var offsetX = latlng2[1] - latlng1[1],
  offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),
  theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14 / 10);

var r2 = (r / 2) / (Math.cos(thetaOffset)),
  theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
  midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
  color: 'blue',
  dashArray: "30 10",
  weight: 3
}

var LineVAT = L.curve(
  [
    'M', latlng1,
    'Q', midpointLatLng,
    latlng2
  ], pathOptions);

// Tokyo Narita -> Tokyo
var latlngs = [
	mTokyoAP.getLatLng(),
	mTokyo.getLatLng()
];
var LineTT = L.polyline(latlngs, {color: 'blue'});

// Tokyo Narita -> Schiphol
var latlngs = [];

var latlng1 = [35.770666,140.387168],
  latlng2 = [52.308039, 4.762198];

var offsetX = latlng2[1] - latlng1[1],
  offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),
  theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14 / 10);

var r2 = (r / 2) / (Math.cos(thetaOffset)),
  theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
  midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
  color: 'blue',
  dashArray: "30 10",
  weight: 3
}

var LineTS = L.curve(
  [
    'M', latlng1,
    'Q', midpointLatLng,
    latlng2
  ], pathOptions);

// Layers
var transMO = L.layerGroup([mSchiphol, mPulkovo, mMoskovskiy, mYaroslavsky, mBeijing, LineSP, LineML, LineYU, LineUB, LineBS]);
var transMA = L.layerGroup([mSchiphol, mPulkovo, mMoskovskiy, mYaroslavsky, mBeijing, LineSP, LineML, LineYU, LineUC,LineCHB, LineBS]);
var transSK = L.layerGroup([mSchiphol, mPulkovo, mMoskovskiy, mYaroslavsky, mVladivostok, mDonghae, mSeoul, mSeoulAP, LineSP, LineML, LineYU, LineUC, LineCTK, LineKV, LineVD, LineDS, LineSS]);
var transSJK = L.layerGroup([mSchiphol, mPulkovo, mMoskovskiy, mYaroslavsky, mVladivostok, mDonghae, mSakaiminato, mKyoto, mOsaka, LineSP, LineML, LineYU, LineUC, LineCTK, LineKV, LineVD, LineDSM, LineSMK, LineOS]);
var transSJT = L.layerGroup([mSchiphol, mPulkovo, mMoskovskiy, mYaroslavsky, mVladivostok, mTokyoAP, mTokyo, LineSP, LineML, LineYU, LineUC, LineCTK, LineKV, LineVAT, LineTT, LineTS]);


var overlayMaps = {
	"Trans-Mongolian": transMO,
	 "Trans-Manchurian": transMA,
	 "Trans-Siberian Korea": transSK,
	 "Trans-Siberian Japan-Kyoto": transSJK,
   "Trans-Siberian Japan-Tokyo": transSJT
};

L.control.layers(null,overlayMaps).addTo(map);

var MyCustomControl = L.Control.extend({
    options: {
        // Default control position
        position: 'bottomleft'
    },
    onAdd: function (map) {
        // Create a container with classname and return it
        return L.DomUtil.create('div', 'my-custom-control');
    },
    setContent: function (content) {
        // Set the innerHTML of the container
        if(this.getContainer().innerHTML == "") {
          this.getContainer().innerHTML = content;
        } else {
        this.getContainer().innerHTML = this.getContainer().innerHTML + "<br>" + content;
        }
    },
    clearContent: function () {
      this.getContainer().innerHTML = "";
    }
});

// Assign to a variable so you can use it later and add it to your map
var myCustomControl =  new MyCustomControl().addTo(map);
var sidebar = L.control.sidebar('sidebar').addTo(map);

</script>
</body>
</html>
